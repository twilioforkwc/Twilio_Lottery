(function(g){var a=null;var f={init:function(k){var l={classNames:{selectbox:"",displayer:"esb-displayer",dropdown:"esb-dropdown",item:"esb-item"},disabled:false,onBuildList:null,onClick:null,speed:0};k=g.extend(true,{},l,k);return this.each(function(){var v=g(this);if("select"!=v[0].nodeName.toLowerCase()){g.error("Not a SELECT element on jQuery.easySelectBox")}else{var w=v.children("option");var m=null;var t=null;var r=v.val();var p=k.classNames.selectbox;var o=k.classNames.displayer;var u=k.classNames.dropdown;var s=k.classNames.item;var n=0;var x="";var q="";g.each(w,function(y,z){text=g(z).text();if(text==""){text="&nbsp;"}q+='<div class="'+s+'">'+text+"</div>";if(r==g(z).val()){n=y}});q='<div class="'+u+'">'+q+"</div>";x='<div class="'+o+'">'+w.eq(n).text()+"</div>";if(k.onBuildList!=null){q=k.onBuildList.call(this,{selectObj:v,options:k,lists:w,initialVal:r})}easySelectHtml='<div tabindex="0" class="easy-select-box '+p+'">'+x+q+"</div>";m=g(easySelectHtml).insertAfter(v);m.addClass("easy-select-"+g("body").find(".easy-select-box").index(m));displayer=m.children("."+o);dropdown=m.children("."+u);j(v,m,dropdown,displayer);v.hide();v.data("easySelect",m);m.data("easySelectData",{options:k,selectObj:v,displayer:displayer,dropdown:dropdown,timer:null});if(v.attr("disabled")||k.disabled){m.addClass("disabled")}else{m.bind("click.easyselectbox",c);m.bind("focusin.easyselectbox",i);m.bind("focusout.easyselectbox",h)}}})},option:function(m,o){if(m=="value"){if(o==undefined){return g(this).val()}}if(m=="speed"){if(o==undefined){var p=g(this);var l=p.data("easySelect");var n=l.data("easySelectData");var k=n.options;return k.speed}}return this.each(function(){var w=g(this);var t=w.data("easySelect");if(t==undefined){g.error("easySelectBox not initialized yet.")}else{var u=t.data("easySelectData");var q=u.displayer;var v=u.dropdown;var r=u.options;if(m=="value"){if(o!=undefined){w.val(o);var s=w.find("option:selected").index();e(w,s)}}else{if(m=="index"){if(o!=undefined){e(w,o)}}else{if(m=="speed"){if(o!=undefined){u.options.speed=o;t.data("easySelectData",u)}}else{if(m=="disabled"){if(o!==undefined){if(o==false){t.removeClass("disabled");t.bind("click.easyselectbox",c);t.bind("focusin.easyselectbox",i);t.bind("focusout.easyselectbox",h)}else{t.addClass("disabled");t.unbind("click.easyselectbox");t.unbind("focusin.easyselectbox");t.unbind("focusout.easyselectbox")}}}}}}}})},open:function(k){return this.each(function(){var q=g(this);var n=q.data("easySelect");if(n==undefined){g.error("easySelectBox not initialized yet.")}else{var o=n.data("easySelectData");var q=o.selectObj;var l=o.displayer;var p=o.dropdown;var m=o.options;if(k==null||k==false){n.focus()}if(!p.is(":visible")){d(p,m.speed)}}})},close:function(){return this.each(function(){var p=g(this);var m=p.data("easySelect");if(m==undefined){g.error("easySelectBox not initialized yet.")}else{var n=m.data("easySelectData");var p=n.selectObj;var k=n.displayer;var o=n.dropdown;var l=n.options;if(o.is(":visible")){b(o,l.speed)}}})},select:function(l,k){return this.each(function(){var s=g(this);var p=s.data("easySelect");if(p==undefined){g.error("easySelectBox not initialized yet.")}else{var q=p.data("easySelectData");var s=q.selectObj;var m=q.displayer;var r=q.dropdown;var o=q.options;if(k==undefined||k==null){k=false}var n=-1;if(k==true){n=s.find('option[value="'+l+'"]').index()}else{if(l==""){n=s.find("option:empty").index()}else{s.find("option").each(function(t){if(g(this).html()==l){n=t;return}})}}e(s,n)}})}};g.fn.easySelectBox=function(k){if(f[k]){return f[k].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof k==="object"||!k){return f.init.apply(this,arguments)}else{g.error("Method "+k+" does not exist on jQuery.easySelectBox")}}return false};function c(p){var n=g(this);var o=n.data("easySelectData");var r=o.selectObj;var k=o.displayer;var q=o.dropdown;var m=o.options;if(g(p.target).get(0)==k.get(0)||g(p.target).get(0)==n.get(0)){if(q.is(":visible")){b(q,m.speed)}else{d(q,m.speed)}}else{if(g(p.target).is("."+m.classNames.item)){var l=q.find("."+m.classNames.item).index(g(p.target));e(r,l);if(m.onClick!=null){m.onClick.call(this,{value:r.val(),text:r.find("option").eq(l).html()})}}else{if(g("."+m.classNames.item).has(g(p.target)).length>0){var l=q.find("."+m.classNames.item).index(g(p.target).parents("."+m.classNames.item));e(r,l);if(m.onClick!=null){m.onClick.call(this,{value:r.val(),text:r.find("option").eq(l).html()})}}}}p.stopPropagation()}function d(l,k){l.slideDown(k)}function b(l,k){l.slideUp(k)}function i(o){var m=g(this);var n=m.data("easySelectData");var q=n.selectObj;var k=n.displayer;var p=n.dropdown;var l=n.options;m.addClass("focused");window.clearTimeout(n.timer);o.stopPropagation()}function h(o){var m=g(this);var n=m.data("easySelectData");var q=n.selectObj;var k=n.displayer;var p=n.dropdown;var l=n.options;m.removeClass("focused");if(p.is(":visible")){n.timer=window.setTimeout(function(){b(p,l.speed)},100);m.data("easySelectData",n)}o.stopPropagation()}function e(r,m){var o=r.data("easySelect");var p=o.data("easySelectData");var k=p.displayer;var q=p.dropdown;var l=p.options;var n=r.find("option").eq(m);k.html(n.html());r.find("option").removeAttr("selected");n.attr("selected","selected");if(q.is(":visible")){b(q,l.speed)}}function j(n,l,m,k){l.css({width:k.outerWidth()});borderWidth=parseInt(m.css("border-left-width"),10)+parseInt(m.css("border-right-width"),10);m.css({width:l.width()-borderWidth})}})(jQuery);